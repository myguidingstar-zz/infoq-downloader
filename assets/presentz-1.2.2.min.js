/*
Presentz - A web library to show synchronized video + slides presentations

Copyright (C) 2012 Federico Fissore

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/// Generated by CoffeeScript 1.6.2
(function(){"use strict";var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},g=function(e,t){return function(){return e.apply(t,arguments)}},y={}.hasOwnProperty,b=function(e,t){function r(){this.constructor=e}for(var n in t)y.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};c=function(){function e(e,t,n,r){this.playStates=e,this.pauseStates=t,this.finishStates=n,this.presentz=r,this.isInPauseState=!0}return e.prototype.handleEvent=function(e){var t,n,r,i;this.isInPlayState=m.call(this.playStates,e)>=0,this.isInPauseState=m.call(this.pauseStates,e)>=0||!this.isInPlayState,this.isInFinishState=m.call(this.finishStates,e)>=0;if(this.isInPlayState)this.presentz.startTimeChecker(),n=this.presentz.listeners.play;else if(this.isInPauseState||this.isInFinishState)this.presentz.stopTimeChecker(),this.isInPauseState?n=this.presentz.listeners.pause:this.isInFinishState&&(n=this.presentz.listeners.finish);if(n!=null)for(r=0,i=n.length;r<i;r++)t=n[r],t();this.isInFinishState&&this.presentz.currentChapterIndex<this.presentz.presentation.chapters.length-1&&this.presentz.changeChapter(this.presentz.currentChapterIndex+1,0,!0)},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.Video=c,t=function(){function e(e,t,n,r){this.presentz=e,this.videoContainer=t,this.width=n,this.height=r,this.video=new c(["play"],["pause"],["ended"],this.presentz),this.elementId=this.presentz.newElementName()}return e.prototype.handle=function(e){return!0},e.prototype.changeVideo=function(e,t){var n,r,i=this;this.wouldPlay=t,n=jQuery(this.videoContainer),n.empty(),n.append('<video id="'+this.elementId+'" controls preload="none" src="'+e.url+'" width="100%" height="100%"></video>'),r={timerRate:500,success:function(e){i.onPlayerLoaded(e)}},new MediaElementPlayer("#"+this.elementId,r)},e.prototype.onPlayerLoaded=function(e){var t,n=this;this.player=e,t=function(e){n.video.handleEvent(e.type)},this.player.addEventListener("play",t,!1),this.player.addEventListener("pause",t,!1),this.player.addEventListener("ended",t,!1),this.player.load(),this.wouldPlay&&this.play()},e.prototype.currentTime=function(){return this.player.currentTime},e.prototype.skipTo=function(e,t){return t==null&&(t=!1),this.player!=null&&this.player.currentTime>0&&(this.player.setCurrentTime(e),t&&this.play(),!0),!1},e.prototype.play=function(){return this.player.play()},e.prototype.pause=function(){return this.player.pause()},e.prototype.isPaused=function(){return this.video.isInPauseState},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.Html5Video=t,h=function(){function e(e,t,n,r){this.presentz=e,this.videoContainer=t,this.width=n,this.height=r,this.receiveVideoInfo=g(this.receiveVideoInfo,this),this.video=new c(["play"],["pause"],["finish"],this.presentz),this.wouldPlay=!1,this.currentTimeInSeconds=0,this.vimeoCallbackFunctionName=this.presentz.newElementName("callback"),typeof window!="undefined"&&window!==null&&(window[this.vimeoCallbackFunctionName]=this.receiveVideoInfo),this.elementId=this.presentz.newElementName()}return e.prototype.changeVideo=function(e,t){var n;this.videoData=e,this.wouldPlay=t,n={url:"http://vimeo.com/api/v2/video/"+this.videoId(this.videoData)+".json",dataType:"jsonp",jsonpCallback:this.vimeoCallbackFunctionName},jQuery.ajax(n)},e.prototype.videoId=function(e){var t;return t=e.url,t=t.substr(t.lastIndexOf("/")+1),t.indexOf("?")!==-1&&(t=t.substr(0,t.indexOf("?"))),t},e.prototype.receiveVideoInfo=function(e){var t,n,r,i,s=this;n="http://player.vimeo.com/video/"+this.videoId(this.videoData)+"?api=1&player_id="+this.elementId,jQuery("#"+this.elementId).length===0?(i='<iframe id="'+this.elementId+'" src="'+n+'" width="'+this.width+'" height="'+this.height+'" frameborder="0"></iframe>',jQuery(this.videoContainer).append(i),t=jQuery("#"+this.elementId)[0],r=function(e){s.onReady(e)},$f(t).addEvent("ready",r)):(t=jQuery("#"+this.elementId)[0],t.src=n)},e.prototype.handle=function(e){return e.url.toLowerCase().indexOf("//vimeo.com/")!==-1},e.prototype.onReady=function(e){var t=this;this.player=$f(e),this.player.addEvent("play",function(){t.video.handleEvent("play")}),this.player.addEvent("pause",function(){t.video.handleEvent("pause")}),this.player.addEvent("finish",function(){t.video.handleEvent("finish")}),this.player.addEvent("playProgress",function(e){t.currentTimeInSeconds=e.seconds}),this.player.addEvent("loadProgress",function(e){t.loadedTimeInSeconds=parseInt(parseFloat(e.duration)*parseFloat(e.percent))}),this.wouldPlay&&(this.wouldPlay=!1,this.play())},e.prototype.currentTime=function(){return this.currentTimeInSeconds},e.prototype.skipTo=function(e,t){return t==null&&(t=!1),e<=this.loadedTimeInSeconds&&(this.player.api("seekTo",e+2),t&&this.play(),!0),!1},e.prototype.play=function(){return this.player.api("play")},e.prototype.pause=function(){return this.player.api("pause")},e.prototype.isPaused=function(){return this.video.isInPauseState},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.Vimeo=h,p=function(){function t(e,t,n,r){this.presentz=e,this.videoContainer=t,this.width=n,this.height=r,this.handleEvent=g(this.handleEvent,this),this.onReady=g(this.onReady,this),this.video=new c([1],[-1,2],[0],this.presentz),this.elementId=this.presentz.newElementName()}var e;return e="//www.youtube.com/iframe_api",t.prototype.ensureYoutubeIframeAPILoaded=function(t){var n,r,i;jQuery('script[src="'+e+'"]').length===0?(i=document.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,n=jQuery("script"),n.length===0?jQuery(this.videoContainer)[0].appendChild(i):(r=n[0],r.parentNode.insertBefore(i,r)),window.onYouTubeIframeAPIReady=function(){return t()}):t()},t.prototype.changeVideo=function(e,t){var n=this;this.wouldPlay=t,this.ensureYoutubeIframeAPILoaded(function(){jQuery("#"+n.elementId).length===0?(jQuery(n.videoContainer).append('<div id="'+n.elementId+'"></div>'),n.player=new YT.Player(n.elementId,{height:n.height,width:n.width,videoId:n.videoId(e),playerVars:{rel:0,wmode:"opaque"},events:{onReady:n.onReady,onStateChange:n.handleEvent}})):n.player.cueVideoById(n.videoId(e))})},t.prototype.videoId=function(e){var t,n;n=e.url.toLowerCase(),t=e.url;if(n.indexOf("//youtu.be/")!==-1)t=t.substr(t.lastIndexOf("/")+1),t.indexOf("?")!==-1&&(t=t.substr(0,t.indexOf("?")));else if(n.indexOf("//youtube.com/")!==-1||n.indexOf("//www.youtube.com/")!==-1)t=t.substr(t.indexOf("v=")+2),t.indexOf("&")!==-1&&(t=t.substr(0,t.indexOf("&")));return t},t.prototype.onReady=function(){if(this.wouldPlay)return this.play()},t.prototype.handleEvent=function(e){this.video.handleEvent(e.data)},t.prototype.handle=function(e){var t;return t=e.url.toLowerCase(),t.indexOf("//youtu.be/")!==-1||t.indexOf("//youtube.com/")!==-1||t.indexOf("//www.youtube.com/")!==-1},t.prototype.currentTime=function(){var e;return((e=this.player)!=null?e.getCurrentTime:void 0)!=null?this.player.getCurrentTime():0},t.prototype.skipTo=function(e,t){var n;return t==null&&(t=!1),((n=this.player)!=null?n.seekTo:void 0)!=null&&((t||this.isPaused())&&this.player.seekTo(e,!0),t&&this.play(),!0),!1},t.prototype.play=function(){return this.player.playVideo()},t.prototype.pause=function(){return this.player.pauseVideo()},t.prototype.isPaused=function(){return this.video.isInPauseState},t}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.Youtube=p,e=function(){function e(e,n,r,i){this.presentz=e,this.video=new t(this.presentz,n,r,i)}return e.prototype.changeVideo=function(e,t){var n;this.wouldPlay=t,n={url:e.url,dataType:"jsonp",data:"skin=json",jsonpCallback:"presentz.videoPlugin.receiveVideoInfo"},jQuery.ajax(n)},e.prototype.receiveVideoInfo=function(e){var t;t={url:e[0].Post.media.url},this.video.changeVideo(t,this.wouldPlay),this.player=this.video.player,this.skipTo=this.video.skipTo},e.prototype.handle=function(e){return e.url.toLowerCase().indexOf("http://blip.tv")!==-1},e.prototype.currentTime=function(){return this.video.currentTime()},e.prototype.skipTo=function(e,t){return t==null&&(t=!1),this.video.skipTo(e,t)},e.prototype.play=function(){return this.video.play()},e.prototype.pause=function(){return this.video.pause()},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.BlipTv=e,r=function(){function e(e,t){this.presentz=e,this.slideContainer=t,this.preloadedSlides=[]}return e.prototype.handle=function(e){return e.url!=null},e.prototype.changeSlide=function(e){var t,n;t=jQuery(""+this.slideContainer+" img"),t.length===0?(n=jQuery(this.slideContainer),n.empty(),n.append('<img src="'+e.url+'"/>')):t.attr("src",e.url)},e.prototype.preload=function(e){var t,n;if(n=e.url,m.call(this.preloadedSlides,n)>=0)return;t=new Image,t.src=e.url,this.preloadedSlides.push(e.url)},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.ImgSlide=r,u=function(){function e(e,t,n,r){this.presentz=e,this.slideContainer=t,this.width=n,this.height=r,this.currentSlide=0,this.elementId=this.presentz.newElementName(),this.swfId=this.presentz.newElementName()}return e.prototype.handle=function(e){return e.url==null?!1:e.url.toLowerCase().indexOf("slideshare.net")!==-1},e.prototype.slideId=function(e){return e.url.substr(e.url.lastIndexOf("/")+1,e.url.lastIndexOf("#")-1-e.url.lastIndexOf("/"))},e.prototype.slideNumber=function(e){return parseInt(e.url.substr(e.url.lastIndexOf("#")+1))},e.prototype.changeSlide=function(e){var t,n,r,i,s,o,u,a,f;n=jQuery("#"+this.swfId),n.length===0?(t=jQuery(this.slideContainer),t.empty(),t.append('<div id="'+this.elementId+'"></div>'),s=this.slideId(e),a={allowScriptAccess:"always",wmode:"opaque"},r={id:this.swfId},o={doc:s,rel:0},swfobject.embedSWF("http://static.slidesharecdn.com/swf/ssplayer2.swf",this.elementId,this.width,this.height,"8",null,o,a,r),this.currentSlide=0):(f=n[0],u=this.slideNumber(e),f.getCurrentSlide!=null&&(i=f.getCurrentSlide(),u===i+1?f.next():(f.jumpTo(this.slideNumber(e)),this.currentSlide=f.getCurrentSlide())))},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.SlideShare=u,a=function(){function e(e,t){this.presentz=e,this.slideContainer=t,this.elementId=this.presentz.newElementName(),this.preloadedSlides=[],this.slideInfo={}}return e.prototype.handle=function(e){return e.url==null?!1:e.url.toLowerCase().indexOf("slideshare.net")!==-1&&e.public_url!=null},e.prototype.slideNumber=function(e){return parseInt(e.url.substr(e.url.lastIndexOf("#")+1))},e.prototype.ensureSlideInfoFetched=function(e,t){var n=this;if(this.slideInfo[e]!=null)return t();jQuery.ajax({url:"http://www.slideshare.net/api/oembed/2",data:{url:e,format:"json"},dataType:"jsonp",success:function(r){return n.slideInfo[e]=r,t()}})},e.prototype.urlOfSlide=function(e){var t;return t=this.slideInfo[e.public_url],t.conversion_version===2?""+t.slide_image_baseurl+this.slideNumber(e)+t.slide_image_baseurl_suffix:""+t.slide_image_baseurl+"-slide-"+this.slideNumber(e)+t.slide_image_baseurl_suffix},e.prototype.changeSlide=function(e){var t,n=this;jQuery("#"+this.elementId).length===0&&(t=jQuery(this.slideContainer),t.empty(),t.append('<div id="'+this.elementId+'"></div>')),this.ensureSlideInfoFetched(e.public_url,function(){var t;return t=jQuery("#"+n.elementId+" img"),t.length===0?jQuery("#"+n.elementId).append('<img src="'+n.urlOfSlide(e)+'"/>'):t.attr("src",n.urlOfSlide(e))})},e.prototype.preload=function(e){var t=this;if(e.public_url==null)return;this.ensureSlideInfoFetched(e.public_url,function(){var n,r;r=t.urlOfSlide(e);if(m.call(t.preloadedSlides,r)>=0)return;return n=new Image,n.src=r,t.preloadedSlides.push(r)})},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.SlideShareOEmbed=a,l=function(){function e(e,t,n,r){this.presentz=e,this.slideContainer=t,this.width=n,this.height=r,this.preloadedSlides=[],this.elementId=this.presentz.newElementName(),this.swfId=this.presentz.newElementName(),this.preloadSlideContainerId=this.presentz.newElementName(),this.preloadSlideId=this.presentz.newElementName()}return e.prototype.handle=function(e){return e.url==null?!1:e.url.toLowerCase().indexOf(".swf")!==-1},e.prototype.changeSlide=function(e){var t,n,r,i;jQuery("#"+this.swfId).length===0?(t=jQuery(this.slideContainer),t.empty(),t.append('<div id="'+this.elementId+'"></div>'),r={wmode:"opaque"},n={id:this.swfId},swfobject.embedSWF(e.url,this.elementId,this.width,this.height,"8",null,null,r,n)):(i=jQuery("#"+this.swfId)[0],i.data=e.url)},e.prototype.preload=function(e){var t,n,r=this;if(n=e.url,m.call(this.preloadedSlides,n)>=0)return;jQuery("#"+this.preloadSlideId).remove(),jQuery(this.slideContainer).append('<div id="'+this.preloadSlideContainerId+'"></div>'),t={id:""+this.preloadSlideId,style:"visibility: hidden; position: absolute; margin: 0 0 0 0; top: 0;"},swfobject.embedSWF(e.url,""+this.preloadSlideContainerId,"1","1","8",null,null,null,t,function(){return r.preloadedSlides.push(e.url)})},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.SwfSlide=l,f=function(){function e(e,t,n,r){this.presentz=e,this.slideContainer=t,this.width=n,this.height=r,this.currentSlide=0,this.elementId=this.presentz.newElementName()}return e.prototype.handle=function(e){return e.url==null?!1:e.url.toLowerCase().indexOf("speakerdeck.com")!==-1},e.prototype.changeSlide=function(e){var t,n,r,i,s,o=this;jQuery(""+this.slideContainer+" iframe.speakerdeck-iframe").length===0?(t=jQuery(this.slideContainer),t.empty(),s=this.slideId(e),r=function(e){var t;if(e.origin.indexOf("speakerdeck.com")===-1)return;o.speakerdeckOrigin=e.origin,o.speakerdeck=e.source,t=JSON.parse(e.data);if(t[0]==="change")return o.currentSlide=t[1].number},window.addEventListener("message",r,!1),i=document.createElement("script"),i.type="text/javascript",i.async=!0,i.src="http://speakerdeck.com/assets/embed.js",i.setAttribute("class","speakerdeck-embed"),i.setAttribute("data-id",s),t[0].appendChild(i),this.pingInterval=setInterval(function(){var e;e=jQuery(""+o.slideContainer+" iframe.speakerdeck-iframe");if(e.length>0&&e[0].contentWindow)return e[0].contentWindow.postMessage(JSON.stringify(["ping"]),"*")},500)):this.speakerdeck!=null?(n=this.slideNumber(e),this.speakerdeck.postMessage(JSON.stringify(["goToSlide",n]),this.speakerdeckOrigin)):console.log("no speakerdeck")},e.prototype.slideNumber=function(e){return parseInt(e.url.substr(e.url.lastIndexOf("#")+1))},e.prototype.slideId=function(e){return e.url.substring(e.url.lastIndexOf("/")+1,e.url.lastIndexOf("#"))},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.SpeakerDeck=f,n=function(){function e(e,t){this.presentz=e,this.slideContainer=t,this.iframeSelector=""+this.slideContainer+" iframe.iframe-slide-container"}return e.prototype.handle=function(e){return e.url!=null},e.prototype.changeSlide=function(e){var t,n;t=jQuery(this.iframeSelector),t.length===0?(n=jQuery(this.slideContainer),n.empty(),n.append('<iframe frameborder="0" class="iframe-slide-container" src="'+e.url+'"></iframe>')):t.attr("src",e.url)},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.IFrameSlide=n,o=function(e){function t(){return v=t.__super__.constructor.apply(this,arguments),v}return b(t,e),t.prototype.handle=function(e){return e.url==null?!1:e.url.toLowerCase().indexOf("rvl.io")!==-1},t}(n),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.RvlIO=o,i=function(){function e(){}return e.prototype.handle=function(e){return e.url==null},e.prototype.changeSlide=function(){},e}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.NoSlide=i,s=function(){function v(e,s,c,v){var m,g;g=d(s),m=d(v),this.availableVideoPlugins={vimeo:new h(this,e,g.width,g.height),youtube:new p(this,e,g.width,g.height),html5:new t(this,e,g.width,g.height)},this.availableSlidePlugins={slideshare:new u(this,c,m.width,m.height),slideshareoembed:new a(this,c,m.width,m.height),swf:new l(this,c,m.width,m.height),speakerdeck:new f(this,c,m.width,m.height),image:new r(this,c,m.width,m.height),iframe:new n(this,c,m.width,m.height),rvlio:new o(this,c,m.width,m.height),none:new i},this.videoPlugins=[this.availableVideoPlugins.vimeo,this.availableVideoPlugins.youtube],this.slidePlugins=[this.availableSlidePlugins.slideshare,this.availableSlidePlugins.slideshareoembed,this.availableSlidePlugins.swf,this.availableSlidePlugins.speakerdeck,this.availableSlidePlugins.rvlio,this.availableSlidePlugins.none],this.defaultVideoPlugin=this.availableVideoPlugins.html5,this.defaultSlidePlugin=this.availableSlidePlugins.image,this.currentChapterIndex=-1,this.currentSlideIndex=-1,this.listeners={slidechange:[],videochange:[],timechange:[],play:[],pause:[],finish:[]},this.isSynchronized=!0}var e,s,c,d;return e=function(){},d=function(e){var t,n;return t=e.split("x"),n={width:jQuery.trim(t[0]),height:jQuery.trim(t[1])}},v.prototype.registerVideoPlugin=function(e,t){this.availableVideoPlugins[e]=t,this.videoPlugins.push(t)},v.prototype.registerSlidePlugin=function(e,t){this.availableSlidePlugins[e]=t,this.slidePlugins.push(t)},v.prototype.init=function(e){var t,n,r,i,o,u,a,f;this.presentation=e,this.intervalSet&&this.stopTimeChecker(),this.currentChapterIndex=-1,this.currentSlideIndex=-1,a=this.presentation.chapters;for(r=0,o=a.length;r<o;r++){t=a[r],t.video._plugin=c(this,t.video),f=t.slides;for(i=0,u=f.length;i<u;i++)n=f[i],n._plugin=s(this,n);t.duration==null&&t.slides!=null&&t.slides.length>0&&(t.duration=t.slides[t.slides.length-1].time+5)}},v.prototype.on=function(e,t){return this.listeners[e].push(t)},v.prototype.changeChapter=function(t,n,r,i){var s,o,u,a,f,l;i==null&&(i=e),o=this.presentation.chapters[t];if(o==null)return i("no chapter at index "+t);u=o.slides[n];if(u==null)return i("no slide at index "+n);if(t!==this.currentChapterIndex||this.currentChapterIndex!==-1&&this.presentation.chapters[this.currentChapterIndex].video._plugin.skipTo(u.time,r)){this.changeSlide(t,n);if(t!==this.currentChapterIndex){o.video._plugin.changeVideo(o.video,r),o.video._plugin.skipTo(u.time,r),l=this.listeners.videochange;for(a=0,f=l.length;a<f;a++)s=l[a],s(this.currentChapterIndex,this.currentSlideIndex,t,n)}this.currentChapterIndex=t}i()},v.prototype.changeSlide=function(e,t){var n,r,i,s,o,u,a,f,l,c;o=this.presentation.chapters[e].slides[t],o._plugin.changeSlide(o),s=this.currentSlideIndex,this.currentSlideIndex=t,r=this.presentation.chapters[e].slides.slice(t+1,+(t+5)+1||9e9);for(u=0,f=r.length;u<f;u++)i=r[u],i._plugin.preload!=null&&i._plugin.preload(i);c=this.listeners.slidechange;for(a=0,l=c.length;a<l;a++)n=c[a],n(this.currentChapterIndex,s,e,t)},v.prototype.checkSlideChange=function(e){var t,n,r,i,s,o,u,a,f;i=this.presentation.chapters[this.currentChapterIndex].slides;for(s=0,u=i.length;s<u;s++)r=i[s],r.time<=e&&(t=r);t!=null&&i.indexOf(t)!==this.currentSlideIndex&&this.changeSlide(this.currentChapterIndex,i.indexOf(t)),f=this.listeners.timechange;for(o=0,a=f.length;o<a;o++)n=f[o],n(e)},c=function(e,t){var n,r;return t._plugin_id!=null&&e.availableVideoPlugins[t._plugin_id]!=null?e.availableVideoPlugins[t._plugin_id]:(r=function(){var r,i,s,o;s=e.videoPlugins,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],n.handle(t)&&o.push(n);return o}(),r.length>0?r[0]:e.defaultVideoPlugin)},s=function(e,t){var n,r;return t._plugin_id!=null&&e.availableSlidePlugins[t._plugin_id]!=null?e.availableSlidePlugins[t._plugin_id]:(r=function(){var r,i,s,o;s=e.slidePlugins,o=[];for(r=0,i=s.length;r<i;r++)n=s[r],n.handle(t)&&o.push(n);return o}(),r.length>0?r[0]:e.defaultSlidePlugin)},v.prototype.synchronized=function(e){this.isSynchronized=e,this.intervalSet&&!this.isSynchronized&&this.stopTimeChecker();if(!this.intervalSet&&this.isSynchronized&&!this.isPaused())return this.startTimeChecker()},v.prototype.startTimeChecker=function(){var e,t=this;if(!this.isSynchronized)return;clearInterval(this.interval),this.intervalSet=!0,e=function(){t.currentChapterIndex!==-1&&t.checkSlideChange(t.presentation.chapters[t.currentChapterIndex].video._plugin.currentTime())},this.interval=setInterval(e,500)},v.prototype.stopTimeChecker=function(){clearInterval(this.interval),this.intervalSet=!1},v.prototype.newElementName=function(e){return e!=null?""+e+"_"+Math.round(Math.random()*1e6):"element_"+Math.round(Math.random()*1e6)},v.prototype.pause=function(){if(this.currentChapterIndex!==-1)return this.presentation.chapters[this.currentChapterIndex].video._plugin.pause()},v.prototype.isPaused=function(){if(this.currentChapterIndex!==-1)return this.presentation.chapters[this.currentChapterIndex].video._plugin.isPaused()},v.prototype.play=function(){if(this.currentChapterIndex!==-1)return this.presentation.chapters[this.currentChapterIndex].video._plugin.play()},v.prototype.next=function(){return this.presentation.chapters[this.currentChapterIndex].slides.length>this.currentSlideIndex+1?(this.changeChapter(this.currentChapterIndex,this.currentSlideIndex+1,!0),!0):this.presentation.chapters.length>this.currentChapterIndex+1?(this.changeChapter(this.currentChapterIndex+1,0,!0),!0):!1},v.prototype.previous=function(){return this.currentSlideIndex-1>=0?(this.changeChapter(this.currentChapterIndex,this.currentSlideIndex-1,!0),!0):this.currentChapterIndex-1>=0?(this.changeChapter(this.currentChapterIndex-1,this.presentation.chapters[this.currentChapterIndex-1].slides.length-1,!0),!0):!1},v}(),d=typeof exports!="undefined"&&exports!==null?exports:window,d.presentz==null&&(d.presentz={}),d.presentz.Presentz=s,d.Presentz=s}).call(this);